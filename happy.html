<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="theme-color" content="#ff6aa2" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <title>Thi·ªáp 20/10 g·ª≠i ƒë·∫øn c√¥ g√°i b√© nh·ªè‚ú®</title>
  <style>
    :root{
      --bg:#fff7fb; --pink:#ff6aa2; --pink-2:#ff93bd; --vio:#8a63ff; --text:#3b2b3b; --gold:#ffd166;
      --cover-gif:url('https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExZTR6ZTc1dDk0cWl5aTFyNnUybXIybzRydW1rN2RpbjJqYzQwazNnNiZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/3o6Zt8MgUuvSbkZYWc/giphy.gif');
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;-webkit-tap-highlight-color:transparent;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--text);background:var(--bg)}
    .app{min-height:100%;display:grid;place-items:center}

    /* COVER */
    .cover{
      position:relative; inline-size:100%; block-size:100vh;
      display:grid; place-items:center; overflow:hidden; transition:opacity .45s ease, transform .45s ease;
    }
    @supports(height:100dvh){ .cover{ block-size:100dvh; } }
    .cover::before{
      content:""; position:absolute; inset:0; background:var(--cover-gif) center/cover no-repeat;
      filter:saturate(1.05) contrast(1.05);
    }
    .cover::after{
      content:""; position:absolute; inset:0;
      background:radial-gradient(80% 60% at 50% 20%, rgba(255,255,255,.6), transparent 60%),
                 linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,.45));
    }
    .cover-inner{position:relative; z-index:2; display:flex; flex-direction:column; align-items:center; gap:18px; padding:20px; text-align:center}
    .badge{display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:999px; background:rgba(255,255,255,.7); backdrop-filter:blur(6px); box-shadow:0 8px 30px rgba(0,0,0,.15); font-weight:700}
    .badge .dot{inline-size:10px; block-size:10px; border-radius:50%; background:var(--pink)}
    .title{font-size:clamp(26px,5.2vw,42px); line-height:1.1; margin:0; color:#fff; text-shadow:0 3px 16px rgba(0,0,0,.35)}
    .subtitle{margin:0; color:#ffeef6; text-shadow:0 2px 12px rgba(0,0,0,.35)}

    .btn{
      --p:var(--pink); --p2:var(--pink-2);
      appearance:none; border:0; cursor:pointer; padding:16px 22px; border-radius:16px; font-weight:800; letter-spacing:.3px;
      background:linear-gradient(135deg, var(--p), var(--p2)); color:#fff;
      box-shadow:0 10px 24px rgba(255,106,162,.35), inset 0 -2px 0 rgba(0,0,0,.08);
      transition:transform .15s ease, box-shadow .2s ease, filter .2s ease;
    }
    .btn:hover{ transform:translateY(-1px); box-shadow:0 14px 30px rgba(255,106,162,.45) }
    .btn:active{ transform:translateY(0) }
    .row{ display:flex; gap:10px; flex-wrap:wrap; margin-top:12px }
    .row .btn.secondary{ --p:#7b68ee; --p2:#a48fff }

    /* CARD */
    .card{
      position:fixed; inset:0; display:grid; place-items:center; padding:16px;
      background:linear-gradient(180deg,#fff7fb,#fff), radial-gradient(1200px 600px at 50% -10%, #ffe4f1 0%, transparent 60%);
      opacity:0; pointer-events:none; transform:translateY(8px) scale(.99); transition:opacity .45s ease, transform .45s ease;
      z-index:2; /* d∆∞·ªõi layer hi·ªáu ·ª©ng */
    }
    .app.open .card{ opacity:1; pointer-events:auto; transform:translateY(0) scale(1) }

    .paper{
      position:relative; max-inline-size:720px; width:100%; background:#fff; border-radius:24px;
      box-shadow:0 30px 60px rgba(255,106,162,.18), 0 16px 40px rgba(138,99,255,.12); overflow:hidden;
    }

    .ribbon{
      position:absolute; inset:0 0 auto 0; block-size:62px;
      background:linear-gradient(90deg,var(--gold),#ffd98a 60%,var(--gold));
      display:flex; align-items:center; justify-content:center; gap:8px; color:#6b4a00; font-weight:800; letter-spacing:.4px;
      box-shadow:0 8px 16px rgba(0,0,0,.06); font-size:15px;
    }
    .ribbon small{opacity:.8; font-weight:700}

    .paper-body{ padding:88px 22px calc(22px + env(safe-area-inset-bottom)); display:grid; gap:14px }
    .message{ font-size:clamp(16px,4.2vw,18px); line-height:1.65; margin:0; color:#553a55 }
    .sig{ margin-top:8px; display:flex; align-items:center; gap:10px; color:#6b4a00; font-weight:700 }
    .sig .avatar{ inline-size:36px; block-size:36px; border-radius:50%; background:linear-gradient(135deg,#ffe1ef,#ffd8a8) }

    /* üåü L·ªöP HI·ªÜU ·ª®NG: FIXED + Z-INDEX CAO -> ph·ªß full m√†n h√¨nh k·ªÉ c·∫£ iOS */
    .float{
      position:fixed; inset:0; pointer-events:none; overflow:hidden;
      z-index:9999; /* cao h∆°n m·ªçi th·ª© */
    }
    .particle{
      position:absolute; font-size:18px; user-select:none; will-change:transform,opacity;
      animation:fall var(--dur) linear forwards, sway var(--sway) ease-in-out infinite;
      -webkit-transform:translateZ(0); /* hint cho iOS */
    }
    @keyframes fall{
      from{ transform:translate3d(var(--x), -10%, 0) rotate(0deg); opacity:0 }
      10%{ opacity:.95 }
      to{ transform:translate3d(var(--x2), 110%, 0) rotate(var(--rot)); opacity:0 }
    }
    @keyframes sway{ 0%{translate:0 0} 50%{translate:8px 0} 100%{translate:0 0} }

    .back{
      position:fixed; right:16px; bottom:calc(16px + env(safe-area-inset-bottom)); z-index:10000;
      opacity:0; pointer-events:none; transition:opacity .3s ease;
    }
    .app.open .back{ opacity:1; pointer-events:auto }

    /* Reduce Motion v·∫´n c√≥ hi·ªáu ·ª©ng nh·∫π */
    @media (prefers-reduced-motion: reduce){
      .particle{
        animation:pop var(--dur) ease-out forwards, sway var(--sway) ease-in-out infinite;
      }
      .card,.btn{ transition:none }
    }
    @keyframes pop{
      from{ transform:translate3d(var(--x), 0, 0) scale(.96) rotate(0deg); opacity:.95 }
      to{   transform:translate3d(var(--x2), 20vh, 0) scale(1) rotate(var(--rot)); opacity:0 }
    }

    .app.open .cover{ opacity:0; pointer-events:none; transform:scale(1.05) }
  </style>
</head>
<body>
  <main class="app" id="app">
    <!-- LAYER HI·ªÜU ·ª®NG TO√ÄN M√ÄN H√åNH -->
    <div class="float" id="float" aria-hidden="true"></div>

    <!-- COVER -->
    <section class="cover" aria-label="Trang b√¨a thi·ªáp">
      <div class="cover-inner">
        <span class="badge"><span class="dot"></span> 20/10 vibes ‚ú®</span>
        <h1 class="title">G·ª≠i c√¥ g√°i d·ªÖ th∆∞∆°ng ‚Äì Happy Vietnamese Women's Day</h1>
        <p class="subtitle">Ch·∫°m n√∫t b√™n d∆∞·ªõi ƒë·ªÉ m·ªü thi·ªáp nha üíñ</p>
        <button class="btn" id="openBtn" aria-controls="card">M·ªü thi·ªáp üíå</button>
      </div>
    </section>

    <!-- CARD -->
    <section class="card" id="card" aria-live="polite">
      <article class="paper" role="document">
        <div class="ribbon">üåº Happy Women's Day 20/10 üåº</div>
        <div class="paper-body">
          <p class="message">
            N√® c√¥ g√°i xinh ƒë·∫πp, 20/10 vui v·∫ª, h·∫°nh ph√∫c nhaa!<br>
            L√∫c n√†o c≈©ng r·∫°ng r·ª°, t·ª± tin v√† h·∫°nh ph√∫c.<br>
            Mong nh·ªØng ƒëi·ªÅu tuy·ªát nh·∫•t lu√¥n ƒë·∫øn v·ªõi c√¥ g√°i b√© nh·ªè.
          </p>
          <div class="sig"><span class="avatar"></span> From: ... to: üêπ</div>
          <div class="row">
            <button class="btn secondary" id="replay">Blink Blink‚ù§Ô∏è</button>
            <button class="btn" id="copyMsg">Copy l·ªùi ch√∫c</button>
          </div>
        </div>
      </article>
    </section>

    <button class="btn back" id="backBtn" aria-label="Quay l·∫°i b√¨a">‚¨ÖÔ∏è</button>
  </main>

  <script>
    const $ = (s)=>document.querySelector(s);
    const app        = $('#app');
    const openBtn    = $('#openBtn');
    const backBtn    = $('#backBtn');
    const floatLayer = $('#float');
    const copyBtn    = $('#copyMsg');

    // ch·ªët lu√¥n 2 id cho n√∫t "th·∫£ l·∫°i": replay ho·∫∑c blinkBtn
    const replayBtn  = document.getElementById('replay') || document.getElementById('blinkBtn');

    const MESSAGE = `N√® c√¥ g√°i xinh ƒë·∫πp, 20/10 vui v·∫ª, h·∫°nh ph√∫c nhaa! L√∫c n√†o c≈©ng r·∫°ng r·ª°, t·ª± tin v√† h·∫°nh ph√∫c. Mong nh·ªØng ƒëi·ªÅu tuy·ªát nh·∫•t lu√¥n ƒë·∫øn v·ªõi c√¥ g√°i b√© nh·ªè.`;
    const EMOJIS  = ['üíñ','üå∏','üíê','üêπ','üå∑','‚ú®'];

    // N·∫øu m√°y b·∫≠t Reduce Motion ‚Üí v·∫´n ch·∫°y nh·∫π
    const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

    const rand = (min,max)=> Math.random()*(max-min)+min;

    function openCard(){ app.classList.add('open'); burstParticles(); }
    function closeCard(){ app.classList.remove('open'); }

    // click + touch (mobile)
    openBtn.addEventListener('click', openCard, {passive:true});
    openBtn.addEventListener('touchstart', openCard, {passive:true});
    backBtn.addEventListener('click', closeCard, {passive:true});
    backBtn.addEventListener('touchstart', closeCard, {passive:true});
    replayBtn?.addEventListener('click', burstParticles, {passive:true});
    replayBtn?.addEventListener('touchstart', burstParticles, {passive:true});

    copyBtn.addEventListener('click', async () => {
      try{
        await navigator.clipboard.writeText(MESSAGE);
        copyBtn.textContent = 'ƒê√£ copy ‚úÖ';
        setTimeout(()=> copyBtn.textContent = 'Copy l·ªùi ch√∫c', 1600);
      }catch{ alert('Copy kh√¥ng th√†nh c√¥ng, b·∫°n b√¥i ƒëen v√† copy th·ªß c√¥ng nh√©!'); }
    });

    openBtn.addEventListener('keyup', (e)=>{ if(e.key==='Enter'||e.key===' '){ openCard(); } });
    window.addEventListener('load', ()=> openBtn?.focus?.({preventScroll:true}));

    function makeParticle(){
      const el = document.createElement('span');
      el.className = 'particle';
      el.textContent = EMOJIS[(Math.random()*EMOJIS.length)|0];

      const x = rand(0,100);
      const drift = rand(-15,15);
      const size = rand(18,30);

      el.style.left = x + 'vw';
      el.style.top  = prefersReduced ? (rand(0,20)+'%') : '-10%';
      el.style.fontSize = size + 'px';
      el.style.setProperty('--x',  `${x}vw`);
      el.style.setProperty('--x2', `${x + drift}vw`);
      el.style.setProperty('--rot',`${rand(-120,120)}deg`);
      el.style.setProperty('--dur', prefersReduced ? `${rand(2.2,3)}s` : `${rand(4.5,7.5)}s`);
      el.style.setProperty('--sway',prefersReduced ? `${rand(1.5,2.2)}s` : `${rand(2,4)}s`);

      floatLayer.appendChild(el);
      setTimeout(()=> el.remove(), 7000);
    }

    function burstParticles(){
      // n·ªï nhanh
      for(let i=0;i<36;i++) setTimeout(makeParticle, i*28);
      // m∆∞a nh·∫π
      let t=0;
      const rain = setInterval(()=>{
        makeParticle();
        if(++t>42) clearInterval(rain);
      },110);
    }
  </script>
</body>
</html>
